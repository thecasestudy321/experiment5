webpackJsonp([140],{169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){for(var i=new PIXI.Container,o=new PIXI.filters.ColorMatrixFilter,r=n||!1,l=a||{addArrow:!1,type:"horizontal",scale:1},s=new PIXI.Container,c=0;c<3;++c){var h=c+1,d=PIXI.Sprite.fromFrame("TAP_1"+h);d.x=-d.width/2,d.y=-d.height/2;var u=new PIXI.Container;u.addChild(d),s.addChild(u)}var v=0;if(l.direction)switch(l.direction){case"top":v=-Math.PI/2;break;case"bottom":v=Math.PI/2;break;case"left":v=Math.PI;break;case"right":v=0;break;default:v=0}s.filters=[o];for(var f=0;f<s.children.length;f++){var p=s.children[f];p.scale.x=p.scale.y=2,f<2&&M(p,.75*f)}if(i.addChild(s),l.addArrow){var w,T;if(l.direction){w=PIXI.Sprite.fromFrame("oneArrow"),T=new PIXI.extras.MovieClip([w]);var m=l.scale?l.scale:1;T.scale.x=T.scale.y=m,T.pivot={x:0,y:T.height/2},T.rotation=v}else{w=PIXI.Sprite.fromFrame("NBarrow"),(T=new PIXI.extras.MovieClip([w])).pivot={x:T.width/2,y:T.height/2};var x=l.scale?l.scale:1;T.scale.x=T.scale.y=x,"horizontal"!==(l.type?l.type:"horizontal")&&(T.rotation=Math.PI/2)}i.addChild(T),i.arrow=T,i.addEventListener("hideArrow",function(){T.alpha=0,T.visible=!1}),i.addEventListener("showArrow",function(){T.alpha=1,T.visible=!0})}s.alpha=.4;var g=new PIXI.Graphics;function M(e,t){TweenMax.to(e,1.5,{delay:t,alpha:0,repeat:-1}),TweenMax.to(e.scale,1.5,{x:5,y:5,delay:t,repeat:-1})}return g.beginFill(16776960,0),g.drawRect(-50,-50,100,100),i.addChild(g),i.addEventListener(MouseEvent.MOUSE_OVER,function(){s.alpha=.6}),i.addEventListener(MouseEvent.MOUSE_OUT,function(){s.alpha=.4}),i.addEventListener(TouchEvent.TOUCH_BEGIN,function(){i.emit(i.event.TAP),!r&&i.parent&&i.parent.removeChild(i)}),i.x=e,i.y=t,i.setColor=function(e){var t=e>>16,n=e>>8&255,a=255&e;o._loadMatrix([t,0,0,0,0,0,n,0,0,0,0,0,a,0,0,0,0,0,255,0],!1),s.filters=[o]},i.setRotation=function(e){i.rotation=e},i.showAllDir=function(){if(l.direction)for(var e=0;e<3;e++){var t=new PIXI.Container;t.addChild(PIXI.Sprite.fromFrame("oneArrow")),i.addChild(t),t.pivot={x:0,y:T.height/2},t.rotation=Math.PI/2*(e+1)}else{var n=new PIXI.Container;n.addChild(PIXI.Sprite.fromFrame("NBarrow")),i.addChild(n),n.pivot={x:T.width/2,y:T.height/2},n.rotation=i.rotation+Math.PI/2}},i.event={TAP:"pointTap",HIDEARR:"hideArrow",SHOWARR:"showArrow"},instance.info&&instance.info.newLayOut&&i.scale.set(.6,.6),i}},424:function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(529));nb.substance0599=extendsClass(ScienceMain,{frame0:function(){var e=this,t=e.bar;window.bar=t,a.default.apply(e.bar),t.removeTapPoint(),instance.viewStack.frame0.circle.y+=4.5,instance.viewStack.frame0.circle.x-=2,t.rotation=-Math.PI/18,t.start(),NBDrag.removeDrag(t),t.interactive=!1,t.num0.alpha=t.num1.alpha=t.num2.alpha=0;var n=!0,i=void 0,o=[e.bar,e.circle,e.bar,e.weight],r=[e.bar.tint0,e.bar.tint1,e.circle.tint,e.weight.tint,e.bar.num0,e.bar.num1,e.bar.num2,e.bar.num3];!function(){for(var n=0;n<4;n++){var a=e["btn"+n],i=e["rule"+n];i.alpha=0,a.index=i.index=n,a.x=instance.viewStack.conBtn.x,a.y+=20,a.addEventListener(TouchEvent.TAP,h)}e.bar.tint0.alpha=e.bar.tint1.alpha=0,e.weight.tint.alpha=0,e.circle.tint.alpha=0,e.bar.pos.alpha=0,e.left.alpha=e.right0.alpha=e.right1.alpha=0,e.great.alpha=0,e.bar.num3.alpha=0,t.interactive=!1,t.addEventListener(t.event.gotoPeak,s)}();var l=new PIXI.Graphics;function s(){if(n){var a=e.circle.rotation+2*Math.PI/30;TweenMax.to(e.circle,1.5,{rotation:a,ease:Sine.easeInOut})}else e.bar.rotation<0?(instance.NBDownTip.showTip("点击屏幕空白处可继续播放"),t.stop(),TweenMax.killTweensOf(e.circle),t.removeEventListener(t.event.gotoPeak,s),clearTimeout(i),2==e.loopFlag?(TweenMax.killTweensOf(e.right1),TweenMax.killTweensOf(e.right0),TweenMax.killTweensOf(e.left),e.right0.alpha=0,e.left.alpha=0,e.loopFlag=3,TweenMax.to(e.right1,.5,{alpha:1}),0==e.great.alpha&&TweenMax.to(e.great,.5,{alpha:1})):0===e.loopFlag&&(TweenMax.killTweensOf(e.right1),TweenMax.killTweensOf(e.right0),TweenMax.killTweensOf(e.left),e.right1.alpha=0,e.left.alpha=0,TweenMax.to(e.right0,.5,{alpha:1}),e.loopFlag=1),$("canvas").on("click",c),i=setTimeout(function(){c()},2e4)):e.bar.rotation>0&&1==e.loopFlag&&(instance.NBDownTip.showTip("点击屏幕空白处可继续播放"),t.stop(),TweenMax.killTweensOf(e.circle),t.removeEventListener(t.event.gotoPeak,s),clearTimeout(i),e.loopFlag=2,TweenMax.killTweensOf(e.right0),TweenMax.killTweensOf(e.right1),e.right0.alpha=0,e.right1.alpha=0,TweenMax.to(e.left,.5,{alpha:1}),$("canvas").on("click",c),i=setTimeout(function(){c()},2e4))}function c(){if(!e.isStop){clearTimeout(i),$("canvas").off("click",c),instance.NBDownTip.hideTip(),TweenMax.killTweensOf(e.left),TweenMax.killTweensOf(e.right0),TweenMax.killTweensOf(e.right1),TweenMax.to([e.left,e.right0,e.right1],.5,{alpha:0}),t.start();var a=e.circle.rotation+2*Math.PI/30;TweenMax.to(e.circle,1.5,{rotation:a,ease:Sine.easeInOut,onComplete:function(){t.addEventListener(t.event.gotoPeak,s)}}),e.aniBtn.currentFrame=0,3===e.loopFlag&&(e.loopFlag=0,n=!0,TweenMax.to(e.aniBtn,1,{alpha:1,onComplete:function(){e.aniBtn.interactive=!0}}))}}function h(){var a=e["rule"+this.index];if(0===this.currentFrame){for(var i=0;i<4;i++){e["btn"+i].currentFrame=0;var l=e["rule"+i];TweenMax.killTweensOf(l),TweenMax.to(l,.5,{alpha:0})}this.currentFrame=1,TweenMax.killTweensOf(a),TweenMax.to(a,.5,{alpha:1}),0===this.index?(d(r,0),d([e.bar.num0,e.bar.num1,e.bar.tint0],1)):2===this.index?(d(r,0),d([e.bar.tint1,e.bar.num2,e.bar.num3],1)):(d(r,0),d([o[this.index].tint],1))}else{this.currentFrame=0,TweenMax.killTweensOf(a);var c=void 0;c=0===this.index?[o[this.index].tint0,o[this.index].num0,o[this.index].num1]:2===this.index?[o[this.index].tint1,o[this.index].num2]:o[this.index].tint,TweenMax.killTweensOf(c),TweenMax.to(a,.5,{alpha:0}),TweenMax.to(c,.5,{alpha:0})}e.aniBtn.currentFrame=0,n=!0,t.removeEventListener(t.event.gotoPeak,s),t.addEventListener(t.event.gotoPeak,s)}function d(e,t){e.forEach(function(e){TweenMax.killTweensOf(e)}),TweenMax.to(e,.5,{alpha:t})}e.rule2.addChild(l),this.onUpdate=function(){var n=e.bar.toGlobal(e.bar.pos.position),a=e.rule2.toLocal(n);l.clear(),l.lineStyle(2,16252666,1),l.moveTo(-20,1.5),l.lineTo(a.x+5,a.y+10),t.interactive=!1},e.FLAG=0,e.loopFlag=0,e.aniBtn.addEventListener(TouchEvent.TAP,function(){!function(){for(var t=0;t<4;t++){var n=e["btn"+t],a=e["rule"+t];n.currentFrame=0,TweenMax.to(a,.5,{alpha:0})}d(r,0)}(),e.aniBtn.interactive=!1,TweenMax.to(e.aniBtn,1,{alpha:0}),n=!1,clearTimeout(i),e.flag=0})},start:function(){this.menu.addStepFromObj(this.info),this.menu.setExperimentName(this.info.labName),this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"摆锤与齿轮操纵器是如何运行的？",labName:"简易计时器",title0:"简易计时器",CONCLUSION:"垂体利用自重带动齿轮转动，摆锤与齿轮操纵器联合工作，控制转动的规律。",newLayOut:!0},const:{},event:{}}),e.exports=nb.substance0599},529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e||this,n=Math.PI/2,i=0,o=1,r=!1,l=!1;if(t){t.event={dragStart:"pendulem.event.dragStart",dragMove:"pendulem.event.dragMove",dragEnd:"pendulem.event.dragEnd",gotoValley:"pendulem.event.gotoValley",gotoPeak:"pendulem.event.gotoPeak",gotoEnd:"pendulem.event.gotoEnd"},T();var s=!1;return t.addPendulemEvents=T,t.removePendulemEvents=m,t.setAngleLimit=function(e){n=e},t.setAttenuation=function(e){i=e},t.setSpeed=function(e){o=e},t.getIsPlay=w,t.start=function(){r=!0,l=!0,u()},t.stop=f,t.zoomOut=p,t.getTapPoint=function(){return t.point},t.removeTapPoint=v,t}function c(e){s=!0,t.emit(t.event.dragStart,e),f(),v()}function h(e){if(s){var a=e.data.global,i=t.toGlobal({x:0,y:0}),o=-Math.atan2(a.x-i.x,a.y-i.y);o<-n?o=-n:o>n&&(o=n),t.rotation=o,t.emit(t.event.dragMove,{e:e,anngle:o})}}function d(e){s=!1,t.emit(t.event.dragEnd,Object.assign(e,{_rotation:t.rotation}))}function u(){if(w()){var e=t.rotation,n=-(e>0?1:-1)*(Math.abs(e)-i);if(n*e>0)return n=0,void p({speed:1/o,onComplete:function(){t.emit(t.event.gotoEnd,{_rotation:t.rotation})}});TweenMax.to(t,1/o,{rotation:0,ease:Power1.easeIn,onStart:function(){t.emit(t.event.gotoPeak,{_rotation:t.rotation})},onComplete:function(){t.emit(t.event.gotoValley,{_rotation:t.rotation}),TweenMax.to(t,1/o,{rotation:n,ease:Power1.easeOut,onComplete:u})}})}}function v(){var e=t.point;e&&(e.removeAllListeners(),t.removeChild(e),t.point=null)}function f(){r=!1,TweenMax.killTweensOf(t)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onStart,a=e.onComplete,i=void 0!==e.speed?e.speed:o/2;TweenMax.killTweensOf(t),TweenMax.to(t,i,{rotation:0,onStart:n,onComplete:function(){r=!1,"function"==typeof a&&a()}})}function w(){return r}function T(){!function(){if(!l){v();var e=t.weight||{x:0,y:t.height},n=e.x,i=e.y,o=(0,a.default)(n,i,!1,{addArrow:!0});o.y-=o.height/2,t.addChild(o),t.point=o}}(),m(),t.addEventListener(TouchEvent.TOUCH_BEGIN,c),t.addEventListener(TouchEvent.TOUCH_MOVE,h),t.addEventListener(TouchEvent.TOUCH_END,d),t.addEventListener(TouchEvent.TOUCH_END_OUDSIDE,d)}function m(){t.removeEventListener(TouchEvent.TOUCH_MOVE,h),t.removeEventListener(TouchEvent.TOUCH_BEGIN,c),t.removeEventListener(TouchEvent.TOUCH_END,d),t.removeEventListener(TouchEvent.TOUCH_END_OUDSIDE,d)}console.error("请正确初始化pendulem")};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(169))}});