webpackJsonp([4,45,267],{169:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n){for(var i=new PIXI.Container,r=new PIXI.filters.ColorMatrixFilter,o=a||!1,s=n||{addArrow:!1,type:"horizontal",scale:1},d=new PIXI.Container,l=0;l<3;++l){var h=l+1,c=PIXI.Sprite.fromFrame("TAP_1"+h);c.x=-c.width/2,c.y=-c.height/2;var u=new PIXI.Container;u.addChild(c),d.addChild(u)}var v=0;if(s.direction)switch(s.direction){case"top":v=-Math.PI/2;break;case"bottom":v=Math.PI/2;break;case"left":v=Math.PI;break;case"right":v=0;break;default:v=0}d.filters=[r];for(var f=0;f<d.children.length;f++){var g=d.children[f];g.scale.x=g.scale.y=2,f<2&&y(g,.75*f)}if(i.addChild(d),s.addArrow){var p,x;if(s.direction){p=PIXI.Sprite.fromFrame("oneArrow"),x=new PIXI.extras.MovieClip([p]);var m=s.scale?s.scale:1;x.scale.x=x.scale.y=m,x.pivot={x:0,y:x.height/2},x.rotation=v}else{p=PIXI.Sprite.fromFrame("NBarrow"),(x=new PIXI.extras.MovieClip([p])).pivot={x:x.width/2,y:x.height/2};var T=s.scale?s.scale:1;x.scale.x=x.scale.y=T,"horizontal"!==(s.type?s.type:"horizontal")&&(x.rotation=Math.PI/2)}i.addChild(x),i.arrow=x,i.addEventListener("hideArrow",function(){x.alpha=0,x.visible=!1}),i.addEventListener("showArrow",function(){x.alpha=1,x.visible=!0})}d.alpha=.4;var w=new PIXI.Graphics;function y(e,t){TweenMax.to(e,1.5,{delay:t,alpha:0,repeat:-1}),TweenMax.to(e.scale,1.5,{x:5,y:5,delay:t,repeat:-1})}return w.beginFill(16776960,0),w.drawRect(-50,-50,100,100),i.addChild(w),i.addEventListener(MouseEvent.MOUSE_OVER,function(){d.alpha=.6}),i.addEventListener(MouseEvent.MOUSE_OUT,function(){d.alpha=.4}),i.addEventListener(TouchEvent.TOUCH_BEGIN,function(){i.emit(i.event.TAP),!o&&i.parent&&i.parent.removeChild(i)}),i.x=e,i.y=t,i.setColor=function(e){var t=e>>16,a=e>>8&255,n=255&e;r._loadMatrix([t,0,0,0,0,0,a,0,0,0,0,0,n,0,0,0,0,0,255,0],!1),d.filters=[r]},i.setRotation=function(e){i.rotation=e},i.showAllDir=function(){if(s.direction)for(var e=0;e<3;e++){var t=new PIXI.Container;t.addChild(PIXI.Sprite.fromFrame("oneArrow")),i.addChild(t),t.pivot={x:0,y:x.height/2},t.rotation=Math.PI/2*(e+1)}else{var a=new PIXI.Container;a.addChild(PIXI.Sprite.fromFrame("NBarrow")),i.addChild(a),a.pivot={x:x.width/2,y:x.height/2},a.rotation=i.rotation+Math.PI/2}},i.event={TAP:"pointTap",HIDEARR:"hideArrow",SHOWARR:"showArrow"},instance.info&&instance.info.newLayOut&&i.scale.set(.6,.6),i}},239:function(e,t,a){"use strict";nb.substance0147=extendsClass(ScienceMain,{frame0:function(){instance.viewStack.NBONOFF.visible=!1;var e=this.timeline,t=this.step0,a=this.step1,n=!1;a.alpha=0,e.setAutoPlay(!0,1),e.on("change",function(i){!n&&i.time>=1&&(n=!0,TweenMax.to([e,t],.5,{alpha:0,delay:1,onComplete:function(){TweenMax.to(a,.5,{alpha:1})}}));for(var r=1;r<4;r++)t["container"+r].s.alpha=i.time})},start:function(){this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"铁在什么情况下容易生锈？我们怎么防止、减缓铁生锈呢？",labName:"控制铁生锈的速度",CONCLUSION:"铁钉生锈是水和空气共同作用的结果。",newLayOut:!0,bgColor:"#F3E6CF"},const:{},event:{}}),nb.timelineSprite=function(){var e,t,a=this;if(a.bgMask){var n=a.bgMask.getChildAt(0);a.progressBar.mask=n,n.scale.x=0}for(var i,r=this.a0.x===this.a1.x?"vertical":"horizontal",o=0,s=0;s<int.MAX_VALUE;s++){var d=this["a"+s];if(void 0===d){t="vertical"===r?this["a"+(s-1)].y:this["a"+(s-1)].x,o=s;break}0===s&&(e="vertical"===r?d.y:d.x),d.addEventListener(TouchEvent.TAP,function(){"vertical"===r?TweenMax.to(a.drag,.5,{y:this.y,onUpdate:h,onComplete:c}):TweenMax.to(a.drag,.5,{x:this.x,onUpdate:h,onComplete:c}),a.emit("nodeTap",{index:this.name.substr(1,1)})})}this.setDrag=function(e){e&&NBDrag.addDrag(a.drag,i)},this.updateBound=function(){"vertical"==r?(i={x:this.drag.x,y:this.drag.y,width:0,height:t},i={x:this.drag.x,y:this.drag.y,width:0,height:t}):i={x:this.drag.x,y:this.drag.y,width:t,height:0}},this.updateBound(),a.drag.addEventListener(NBDrag.event.STOP_DRAG,function(){if(!1!==a._align_){var n=o-1;if("vertical"===r){var i=Math.round((this.y-e)/(t-e)*n);i<0&&(i=0),TweenMax.to(this,.5,{y:i*(t-e)/n,onUpdate:h,onComplete:c})}else{var s=Math.round((this.x-e)/(t-e)*n);s<0&&(s=0)}}}),a.drag.addEventListener(NBDrag.event.DRAG_MOVE,function(){h()}),a.drag.constY=a.drag.y;var l,h=function(){if("vertical"===r){var n=(a.drag.y-e)/(t-e);a.emit("change",{time:n})}else{a.drag.y=a.drag.constY,a.drag.x>=t&&(a.drag.x=t),a.drag.x<=e&&(a.drag.x=e);var i=(a.drag.x-e)/(t-e);a.emit("change",{time:i}),a.drag.line0&&(a.drag.line0.rotation=1800*i*Math.PI/180,a.drag.line1.rotation=360*i*Math.PI/180),a.bgMask&&(a.bgMask.getChildAt(0).scale.x=i)}},c=function(){a.setMomentsPause(!0,2e3,2);var n=o-1;if("vertical"===r){var i=(a.drag.y-e)/(t-e),s=Math.round(i*n);a.emit("change",{index:s,time:i})}else{var d=(a.drag.x-e)/(t-e),l=Math.round(d*n);a.emit("change",{index:l,time:d})}};this.getNodeCount=function(){return o},this.setNodePos=function(e){var t=this["a"+e];"vertical"===r?a.drag.y=t.y:a.drag.x=t.x},nb.MovieClip.ticker.add(function(){if(a._auto_&&!a.drag.isDragging){var n=t-e;"vertical"===r?(a.drag.y+=a._speed_,a.drag.y>n&&(a.drag.y=n)):(a.drag.x+=a._speed_,a.drag.x>n+a.a0.x&&(a.drag.x=n+a.a0.x)),h()}}),this.setAutoPlay=function(e,t){this._auto_=e,this._speed_=t||.1},this.setAutoAlign=function(e){this._align_=e},this.setMomentsPause=function(e,t,n){clearTimeout(l),e&&!a.NOTafterStopPlay?(a.setAutoPlay(!1),clearTimeout(l),a.setAutoPlay(!1),l=setTimeout(function(){a.setAutoPlay(!0,n)},t)):a.setAutoPlay(!1)},this.resetTimeline=function(){this.drag.x=this.bgMask.x}},e.exports=nb.substance0147},241:function(e,t,a){"use strict";var n=s(a(523)),i=s(a(522)),r=s(a(521)),o=s(a(520));function s(e){return e&&e.__esModule?e:{default:e}}nb.substance0101=extendsClass(ScienceMain,{frame0:function(){var e=this,t=e.form,a=e.step0;i.default.apply(t),r.default.apply(e.step1);for(var n=0;n<3;n++){var s=e.step1["step"+n];instance.step1.apply(s,[e]),s.car0.id=n}e.step1.timeline.addEventListener(o.default.event.CLICK_NODE,function(t){0==t.index&&(e.step1.a0.currentFrame=1,e.step1.a1.currentFrame=e.step1.a2.currentFrame=0),1==t.index&&(e.step1.a1.currentFrame=1,e.step1.a0.currentFrame=e.step1.a2.currentFrame=0),2==t.index&&(e.step1.a2.currentFrame=1,e.step1.a1.currentFrame=e.step1.a0.currentFrame=0)}),instance.viewStack.NBONOFF.visible=!1;for(var d=0;d<3;d++)t.dragForm["tx"+d].alpha=0,t.dragForm["txt"+d].alpha=0;a.right0.alpha=0,e.step0.xuying.alpha=e.step0.bt.alpha=e.step1.alpha=0,e.step1.interactiveChildren=!1,instance.step0.apply(e.step0,[e]),e.step0.bt.addEventListener(TouchEvent.TAP,function(){this.interactive=!1,TweenMax.to(e.step0,.5,{alpha:0,onComplete:function(){e.step0.interactiveChildren=!1,e.biaoti.text="测量3个斜坡上数据的并记录表格中",e.step1.a0.currentFrame=1,TweenMax.to(e.step1,.5,{alpha:1,onComplete:function(){e.step1.interactiveChildren=!0}})}})}),e.step0.bt.interactive=!1},step0:function(){var e=Power0.easeNone,t=arguments[0].form,a=this,i=a.spring,r=a.xuying;n.default.init(i),i.defaultX=i.x,i.defaultY=i.y,n.default.init(a.spring);var o=a.car0;o.defaultX=o.x,o.defaultY=o.y,o.defaultRotation=o.rotation,o.weight=1,o.id=0,NBDrag.addDrag(o),o.addEventListener(NBDrag.event.START_DRAG,function(){r.currentFrame=1,r.alpha=.5}),o.addEventListener(NBDrag.event.STOP_DRAG,function(){var n=this;if(r.alpha=0,n.hitTest(i.hook.hookArea)){i.hook.hookArea.child=n,NBDrag.removeDrag(n);var o=new TimelineMax({onComplete:function(){!function(){for(var e=0;e<3;e++)t.dragForm["txt"+e].text="1N",nb.scienceCommonFun.blinkDisplay(t.dragForm["txt"+e]),t.dragForm["txt"+e].alpha=1}(),n.addEventListener(TouchEvent.TAP,h),TweenMax.to(a.bt,.3,{delay:.5,alpha:1,onComplete:function(){a.bt.interactive=!0}})}});o.add(TweenMax.to(n,.3,{x:a.carPos.x,y:a.carPos.y,rotation:a.carPos.rotation})),o.add([i.setWeight(n.weight,{timer:.5}),TweenMax.to(n,d,{x:"+="+s*Math.sin(l),y:"+="+s*Math.cos(l),ease:e})])}else TweenMax.to(n,.3,{x:n.defaultX,y:n.defaultY,rotation:n.defaultRotation})}),a.spring.weightTxt.position=a.spring.bg.position,a.spring.weightTxt.initY=a.spring.weightTxt.y,a.spring.addEventListener(n.default.event.CHANGING,function(e){a.spring.weightTxt.y=a.spring.weightTxt.initY+e.dis});var s=0,d=.3,l=Math.abs(i.rotation);function h(){this.removeEventListener(TouchEvent.TAP,h),i.setWeight(0),TweenMax.to(this,.5,{x:this.defaultX,y:this.defaultY,rotation:this.defaultRotation}),TweenMax.to(i,.5,{x:i.defaultX,y:i.defaultY,onComplete:function(){a.right0.alpha=1,TweenMax.to(a.right0,.5,{currentFrame:12})}})}i.addEventListener(n.default.event.START_CHANGE,function(e){s=e.dis,d=e.timer})},step1:function(){var e=Power0.easeNone,t=arguments[0].form,a=this,i=a.spring,r=a.btn,o=a.xuying,s=a.btn1,d=a.car0;n.default.init(i),i.defaultX=i.x,i.defaultY=i.y,o.alpha=0,function(){n.default.init(a.spring);var e=a.car0;e.defaultX=e.x,e.defaultY=e.y,e.defaultRotation=e.rotation,e.weight=1,NBDrag.addDrag(e),e.addEventListener(NBDrag.event.START_DRAG,h),e.addEventListener(NBDrag.event.STOP_DRAG,g),a.spring.weightTxt.position=a.spring.bg.position,a.spring.weightTxt.initY=a.spring.weightTxt.y,a.spring.addEventListener(n.default.event.CHANGING,function(e){a.spring.weightTxt.y=a.spring.weightTxt.initY+e.dis}),r&&(a.btn.addEventListener(TouchEvent.TAP,p),r.alpha=0,r.interactive=!1);s&&(a.btn1.addEventListener(TouchEvent.TAP,x),s.alpha=0,s.interactive=!1)}();var l=null;function h(){o.alpha=.5,r&&(a.btn.addEventListener(TouchEvent.TAP,p),r.alpha=0,r.interactive=!1),s&&(a.btn1.addEventListener(TouchEvent.TAP,x),s.alpha=0,s.interactive=!1)}var c=0,u=.3,v=Math.abs(i.rotation);i.addEventListener(n.default.event.START_CHANGE,function(e){c=e.dis,u=e.timer});var f=.05;function g(){var n=this;if(o.alpha=0,n.hitTest(i.hook.hookArea)){l=n,i.hook.hookArea.child=n,NBDrag.removeDrag(n),r&&TweenMax.to(r,.5,{alpha:1,onComplete:function(){r.interactive=!0}});var s=new TimelineMax({onComplete:function(){!function(e){var a=e.id,n=i.getWeight().toFixed(2)+"N";t.dragForm["tx"+a].text=n,nb.scienceCommonFun.blinkDisplay(t.dragForm["tx"+a]),t.dragForm["tx"+a].alpha=1}(n)}});s.add(TweenMax.to(n,.3,{x:a.carPos.x,y:a.carPos.y,rotation:a.carPos.rotation})),s.add([i.setWeight(n.weight,{timer:.5}),TweenMax.to(n,u,{x:"+="+c*Math.sin(v),y:"+="+c*Math.cos(v),ease:e,onUpdate:function(){n.lunzi0.rotation+=f,n.lunzi1.rotation+=f}})])}else TweenMax.to(n,.3,{x:n.defaultX,y:n.defaultY,rotation:n.defaultRotation})}function p(){this.interactive=!1,l.interactive=!1;TweenMax.to(this,.3,{alpha:0}),TweenMax.to([i,l],1,{x:"-="+100*Math.sin(v),y:"-="+100*Math.cos(v),onUpdate:function(){l.lunzi0.rotation-=.05,l.lunzi1.rotation-=.05},onComplete:function(){TweenMax.to(s,.5,{alpha:1,onComplete:function(){s.interactive=!0}})}})}function x(){this.interactive=!1,TweenMax.to(s,.3,{alpha:0}),i.setWeight(0),TweenMax.to(l,.5,{x:l.defaultX,y:l.defaultY,rotation:l.defaultRotation,onComplete:function(){l=null,NBDrag.addDrag(d)}}),TweenMax.to(i,.5,{x:i.defaultX,y:i.defaultY})}},start:function(){this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"利用斜坡，能够更省力地运输一些物品。坡度的不同对省力效果会有不一样的影响么，我们可以用一个实验来试一试？",labName:"斜面的作用2",CONCLUSION:"斜面可以更省力地运输一些物体。坡度越小，越省力，坡度越大，越费力。",newLayOut:!0,bgColor:"#F3E6CF"},event:{}}),e.exports=nb.substance0101},417:function(e,t,a){"use strict";var n=r(a(169)),i=r(a(521));function r(e){return e&&e.__esModule?e:{default:e}}a(239),a(241),nb.substance0592=extendsClass(ScienceMain,{frame0:function(){var e=this,t=[e.a0,e.a1,e.a2],a=[13750737,13750737,13750737],r=[0,0,.9],o=[0,0,.6],s=[0,0,.5];e.timeline.NOTafterStopPlay=!0,i.default.apply(e);for(var d=[],l=0;l<3;l++)e["c"+l].alpha=0,instance.line.apply(e["step"+l],[t,a,o[l],r[l],s[l]]);var h=(0,n.default)(60,-120),c=(0,n.default)(100,-100),u=(0,n.default)(100,80);function v(){if(e.a0.isSlide||e.a1.isSlide||e.a2.isSlide)if(!e.a0.isSlide||e.a1.isSlide||e.a2.isSlide){if(e.a0.isSlide&&e.a1.isSlide&&!e.a2.isSlide)instance.NBDownTip.showTip("用手指刻画矿石"),e.a2.addChild(u);else if(9===d.length&&(instance.NBDownTipsError.showTip("当前步骤已完成"),instance.NBStepsShow(1),0===e.c0.alpha))for(var t=function(t){var a=e["c"+t];TweenMax.to(a,.5,{alpha:1}),TweenMax.to(a.scale,.5,{x:1.5,y:1.5,ease:Sine.easeInOut,onComplete:function(){TweenMax.to(a.scale,.5,{x:1,y:1,ease:Sine.easeInOut})}})},a=0;a<3;a++)t(a)}else instance.NBDownTip.showTip("用铜钥匙刻画矿石"),e.a1.addChild(c);else instance.NBDownTip.showTip("用小刀刻画矿石"),e.a0.addChild(h)}e.a0.Point=h,e.a1.Point=c,e.a2.Point=u,v();for(var f=0;f<3;f++){var g=e["a"+f];g.startX=g.x,g.startY=g.y,g.index=f,g.addEventListener(NBDrag.event.START_DRAG,function(){instance.NBDownTip.hideTip(),this.removeChild(this.Point),e["txt"+this.index].alpha=0}),g.addEventListener(NBDrag.event.STOP_DRAG,function(){var t=this;TweenMax.to(this,.5,{x:this.startX,y:this.startY,ease:Sine.easeInOut,onComplete:function(){v(),e["txt"+t.index].alpha=1}})}),g.addEventListener(NBDrag.event.DRAG_MOVE,function(){for(var t=0;t<3;t++)if(this.hitTest(e["step"+t].w0)){this.isSlide=!0;var a=e["step"+t].w0.name+t+this.name;-1===d.indexOf(a)&&d.push(a)}})}},frame1:function(){var e=this,t=(0,n.default)(e.stone0.width/3,e.stone0.height/3),a=(0,n.default)(e.stone1.width/3,e.stone1.height/3);e.stone0.Point=t,e.stone1.Point=a,e.c1.alpha=0,e.c2.alpha=0,e.ref.alpha=0;for(var i=[],r=0;r<2;r++){var o=e["stone"+r];o.index=r,o.startX=o.x,o.startY=o.y,NBDrag.addDrag(o),o.addEventListener(NBDrag.event.START_DRAG,s),o.addEventListener(NBDrag.event.DRAG_MOVE,d),o.addEventListener(NBDrag.event.STOP_DRAG,l)}function s(){if(instance.NBDownTip.hideTip(),this.Point.parent&&this.removeChild(this.Point),e["txt"+this.index].alpha=0,this.index){var t=PIXI.Sprite.fromFrame("stone5"),a=new PIXI.Graphics,n=new PIXI.Container;n.addChild(t),n.addChild(a),e._container=n,e.addChild(n),a.lineStyle(3,16711680),a.moveTo(0,0),a.lineTo(1,1),n.position=e.stone0.position,n.maskSprite=a,this.currentDrawContainer=n,t.mask=a,e.addChild(this)}else if(e.setChildIndex(e.stone0,e.children.length-1),e._container){i.push(e._container);for(var r=0;r<i.length;r++)e.setChildIndex(i[r],e.children.length-1);e.setChildIndex(e._container,e.children.length-1)}}function d(t){if(this.index){var a=this.currentDrawContainer,n=a.toLocal(t.data.global);if(void 0===a.lastPoint)return void(a.lastPoint=n);var i=a.maskSprite;i.moveTo(a.lastPoint.x,a.lastPoint.y),i.lineTo(n.x,n.y),a.lastPoint=n}var r=this.index?0:1;this.hitTest(e["stone"+r])&&(this.isHit=!0)}function l(){var t=this;TweenMax.to(this,.5,{x:this.startX,y:this.startY,ease:Sine.easeInOut,onComplete:function(){e["txt"+t.index].alpha=1,h()}})}function h(){if(e.stone0.isHit)if(e.stone1.isHit){if(0==e.c1.alpha)for(var n=function(t){var a=e["c"+t];TweenMax.to(a,.5,{alpha:1}),TweenMax.to(a.scale,.5,{x:1.5,y:1.5,ease:Sine.easeInOut,onComplete:function(){TweenMax.to(a.scale,.5,{x:1,y:1,ease:Sine.easeInOut,onComplete:function(){}})}})},i=1;i<3;i++)n(i)}else instance.NBDownTip.showTip("将长石放在石英上刻划"),e.stone1.addChild(a);else e.stone0.addChild(t),instance.NBDownTip.showTip("将石英放在长石上刻划")}h()},line:function(e,t,a,n,i){var r=this,o=new PIXI.Graphics;this.addChild(o);var s={};o.mask=r.maskObj.getChildAt(0);for(var d=0;d<3;d++){var l=e[d];NBDrag.addDrag(l),l.addEventListener(NBDrag.event.START_DRAG,function(t){var a=t;return function(){var t=e[a];t.hitTest(r.w0)&&(s.x=t.x,s.y=t.y)}}(d)),l.addEventListener(NBDrag.event.DRAG_MOVE,function(d){var l=d;return function(){0==l&&o.lineStyle(2,t[0],a),1==l&&o.lineStyle(2,t[1],n),2==l&&o.lineStyle(2,t[2],i);var d=e[l];d.hitTest(r.w0)&&(o.moveTo(s.x,s.y),o.lineTo(d.x,d.y),s.x=d.x,s.y=d.y)}}(d))}},start:function(){this.menu.addStepFromObj(this.info),this.menu.setExperimentName(this.info.labName),this.bindScriptToSprite(this.frame0,"frame0"),this.bindScriptToSprite(this.frame1,"frame1")},info:{experimentImport:"我们可以用指甲、铜钥匙、小钢刀作为判断岩石矿物软硬的标准，分别去刻划矿物，从而知道矿物的软硬。",labName:"比较矿物的硬度2",title0:"用工具刻划判断软硬",title1:"相互刻划判断软硬",OPERATION_0:"用右边工具刻划矿石观察现象",OPERATION_1:"相互刻划矿石观察现象",CONCLUSION:"可以用工具刻划的方式去判断矿物的软硬。"},const:{},event:{}}),e.exports=nb.substance0592},520:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={event:{CLICK_NODE:"nodeTap",CLICK_NODE_REACHED:"nodeTapReached",ON_COMPLETE:"timelineComplete",ON_PLAY:"timelinePlaying",REACHED_NODE:"reachedNode",START_DRAG:"startDrag",DRAGING:"draging",STOP_DRAG:"stopDrag"},init:function(){var e,t,a=this;if(a.bgMask){var i=a.bgMask.getChildAt(0);a.progressBar.mask=i,i.scale.x=0}var r=this.a0.x===this.a1.x?"vertical":"horizontal",o=0,s=[];a.drag.lastPos={x:a.drag.x,y:a.drag.y};for(var d=0;d<int.MAX_VALUE;d++){var l=this["a"+d];if(void 0===l){t="vertical"===r?this["a"+(d-1)].y:this["a"+(d-1)].x,o=d;break}s.push(l),0===d&&(e="vertical"===r?l.y:l.x),l.addEventListener(TouchEvent.TAP,function(){var e=this;"vertical"===r?TweenMax.to(a.drag,.5,{y:this.y}):TweenMax.to(a.drag,.5,{x:this.x,onComplete:function(){a.emit(n.event.CLICK_NODE_REACHED,{index:e.name.substr(1,1)})}}),this.totalFrames&&(s.forEach(function(e){return e.currentFrame=0}),this.currentFrame=1),a.drag.lastPos={x:this.x,y:this.y},a.emit(n.event.CLICK_NODE,{index:this.name.substr(1,1)})})}this.setDrag=function(i){i?(NBDrag.addDrag(a.drag),a.drag.on(NBDrag.event.START_DRAG,function(){var i=(a.drag.x-e)/(t-e);a.emit(n.event.START_DRAG,{time:i})}),a.drag.on(NBDrag.event.DRAG_MOVE,function(){var i=(a.drag.x-e)/(t-e);a.emit(n.event.DRAGING,{time:i})}),a.drag.on(NBDrag.event.STOP_DRAG,function(){var i=(a.drag.x-e)/(t-e);a.emit(n.event.STOP_DRAG,{time:i}),i>=1&&a.emit(n.event.ON_COMPLETE,{time:i})})):NBDrag.removeDrag(a.drag)},a.drag.addEventListener(NBDrag.event.STOP_DRAG,function(){if(!1!==a._align_){var n=o-1;if("vertical"===r){var i=Math.round((this.y-e)/(t-e)*n);i<0&&(i=0)}else{var s=Math.round((this.x-e)/(t-e)*n);s<0&&(s=0)}}}),a.drag.addEventListener(NBDrag.event.DRAG_MOVE,function(){u()});var h=!1;a.drag.constY=a.drag.y;var c,u=function(){a.drag.y=a.drag.constY,a.drag.x>=t&&(a.drag.x=t),a.drag.x<=e&&(a.drag.x=e);var i=(a.drag.x-e)/(t-e);if(i<1){h=!1,a.emit(n.event.ON_PLAY,{time:i});for(var r=0;r<s.length;r++)a.drag.lastPos.x<=s[r].x&&a.drag.x>s[r].x&&a.emit(n.event.REACHED_NODE,{index:r})}else h||(h=!0,a.emit(n.event.ON_COMPLETE,{time:i}));(a.drag.line0&&(a.drag.line0.rotation=1800*i*Math.PI/180,a.drag.line1.rotation=360*i*Math.PI/180),a.bgMask)&&(a.bgMask.getChildAt(0).scale.x=i);a.drag.lastPos={x:a.drag.x,y:a.drag.y}};this.getNodeCount=function(){return o},this.setNodePos=function(e){var t=this["a"+e];"vertical"===r?a.drag.y=t.y:a.drag.x=t.x},nb.MovieClip.ticker.add(function(){a._auto_&&!a.drag.isDragging&&("vertical"===r?a.drag.y+=a._speed_:a.drag.x+=a._speed_,u())}),this.setAutoPlay=function(e,t){this._auto_=e,this._speed_=t||.1},this.setAutoAlign=function(e){this._align_=e},this.setMomentsPause=function(e,t,n){clearTimeout(c),e&&!a.NOTafterStopPlay?(a.setAutoPlay(!1),clearTimeout(c),a.setAutoPlay(!1),c=setTimeout(function(){a.setAutoPlay(!0,n)},t)):a.setAutoPlay(!1)},this.resetTimeline=function(){(this.drag.x=this.bgMask.x,a.bgMask)&&(a.bgMask.getChildAt(0).scale.x=0)}}};t.default=n},521:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||{};var t=this,a=[];n.default.init.apply(this.timeline);for(var i=0;i<this.timeline.getNodeCount();i++){var r=this["step"+i];a.push(r),r.alpha=0,r.visible=!1}var o=this.step0;o.visible=!0,o.alpha=1;var s=0;this.timeline.on(n.default.event.CLICK_NODE,function(n){if(void 0!==n.index&&n.index!=s){var i=e.offset||1200;i=n.index>s?$s(i):-$s(i);var r=void 0!==o.currentX?o.currentX:o.currentX=o.x;TweenMax.to(o,e.oldTm||.6,{x:r+i,alpha:0,onComplete:function(t){t.visible=!1,e.isFix||(t.y=0)},onCompleteParams:[o],ease:Expo.easeOut}),s=n.index,(o=a[s]).visible=!0,r=void 0!==o.currentX?o.currentX:o.currentX=o.x,o.x=r-i,TweenMax.to(o,e.newTm||1,{x:r,alpha:1,ease:Expo.easeOut,onComplete:function(){t.emit(t.boxSwitch_event.CHANGE_COM,{target:o,index:n.index})}})}}),this.addEventListener("render",function(){o.onUpdate&&o.onUpdate()}),t.boxSwitch_event={CHANGE_COM:"changeCom"}};var n=function(e){return e&&e.__esModule?e:{default:e}}(a(520))},522:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e||this,n=a.parent,i=a.record,r=Object.assign({offsetX:-(a.width+10),offsetY:100,limitRect:!0},t),o=instance.stage.NBONOFF||instance.viewStack.NBONOFF,s=Sine.easeInOut;n.bgMask&&(a.mask=n.bgMask.children[0]);a.x=1280-a.record.width-2,a.y=60+o.height*o.scale.y+5;var d=a.x,l=a.y,h=a.x+r.offsetX,c=a.y+r.offsetY;i.addEventListener(TouchEvent.TAP,f);var u=i.x-a.dragForm.x,v=i.y-a.dragForm.y;function f(e){instance.NBDownTip.hideTip(),instance.NBDownTipsError.hideTip(),n.setChildIndex(a,n.children.length-1),a.x==d?(a.emit("showData",{goBack:!1}),TweenMax.to(a,.4,{y:c,onComplete:function(){TweenMax.to(a,.4,{x:h,onComplete:function(){var e=void 0;r.limitRect&&(e={x:0,y:0,width:1280-a.width/3,height:720-a.height}),NBDrag.addDrag(a,e),a.addEventListener(NBDrag.event.DRAG_MOVE,x),a.addEventListener(NBDrag.event.STOP_DRAG,g),i.icon&&TweenMax.to(i.icon,.2,{rotation:Math.PI,ease:s})}})}}),r.showModelMask&&(TweenMax.killTweensOf(n.recordGra),TweenMax.to(n.recordGra,.5,{alpha:1,onComplete:function(){n.setChildIndex(a,n.children.length-1),n.setChildIndex(n.recordGra,n.children.length-2)}}))):(a.emit("showData",{goBack:!0}),e&&p())}function g(){instance.NBDownTip.hideTip(),instance.NBDownTipsError.hideTip(),a.x>d-a.width/3&&p()}function p(){TweenMax.to(a,.5,{x:d,onComplete:function(){TweenMax.to(a,.4,{y:l,onComplete:function(){NBDrag.removeDrag(a),a.removeEventListener(NBDrag.event.DRAG_MOVE,x),a.removeEventListener(NBDrag.event.STOP_DRAG,g),i.icon&&TweenMax.to(i.icon,.2,{rotation:0,ease:s})}})}}),r.showModelMask&&(TweenMax.killTweensOf(n.recordGra),TweenMax.to(n.recordGra,.5,{alpha:0,onComplete:function(){n.setChildIndex(n.recordGra,0)}}))}function x(){a.record.x=u+a.dragForm.x,a.record.y=v+a.dragForm.y}a.showRecord=f,a.recordBack=p,function(){if(r.showModelMask){var e=new PIXI.Graphics;e.beginFill(0,.6),e.drawRect(0,0,1280,720),e.endFill(),n.addChild(e),n.recordGra=e,n.setChildIndex(n.recordGra,0),n.setChildIndex(a,n.children.length-1),n.recordGra.alpha=0,e.addEventListener(TouchEvent.TAP,function(){})}}()}},523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={event:{START_CHANGE:"startChange",CHANGING:"springChanging",CHANGED:"springChanged"},init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return console.error("请传入必要参数obj"),!1;var a=t.range?t.range:10,i=0,r=e.redFlag,o=e.hook,s=e.totalLength,d=e.weightTxt,l=s.height/a;r.zeroX=r.x,r.zeroY=r.y,e.setWeight=function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=void 0===s.del?e.rotation:s.del,c=t*Math.cos(h);if(c>a)return console.error("质量超过量程，请重新设置"),!1;var u=i,v=c;i=c;var f=void 0===s.timer?.3:s.timer;e.emit(n.event.START_CHANGE,{dis:(v-u)*l,timer:f});var g=TweenMax.to([r,o],f,{y:r.zeroY+l*c,ease:Power0.easeNone,onUpdate:function(){var t=g?g.progress():1,a=(v-u)*t+u;d.text=a.toFixed(2)+"N",e.emit(n.event.CHANGING,{dis:r.y-r.zeroY})},onComplete:function(){e.emit(n.event.CHANGED)}});return g},e.getWeight=function(){return i},e.getDis=function(e){return e*l}}};t.default=n}});