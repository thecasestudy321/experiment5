webpackJsonp([108,222],{169:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,i,e,a){for(var s=new PIXI.Container,n=new PIXI.filters.ColorMatrixFilter,r=e||!1,h=a||{addArrow:!1,type:"horizontal",scale:1},o=new PIXI.Container,p=0;p<3;++p){var l=p+1,c=PIXI.Sprite.fromFrame("TAP_1"+l);c.x=-c.width/2,c.y=-c.height/2;var d=new PIXI.Container;d.addChild(c),o.addChild(d)}var m=0;if(h.direction)switch(h.direction){case"top":m=-Math.PI/2;break;case"bottom":m=Math.PI/2;break;case"left":m=Math.PI;break;case"right":m=0;break;default:m=0}o.filters=[n];for(var u=0;u<o.children.length;u++){var T=o.children[u];T.scale.x=T.scale.y=2,u<2&&A(T,.75*u)}if(s.addChild(o),h.addArrow){var b,v;if(h.direction){b=PIXI.Sprite.fromFrame("oneArrow"),v=new PIXI.extras.MovieClip([b]);var f=h.scale?h.scale:1;v.scale.x=v.scale.y=f,v.pivot={x:0,y:v.height/2},v.rotation=m}else{b=PIXI.Sprite.fromFrame("NBarrow"),(v=new PIXI.extras.MovieClip([b])).pivot={x:v.width/2,y:v.height/2};var w=h.scale?h.scale:1;v.scale.x=v.scale.y=w,"horizontal"!==(h.type?h.type:"horizontal")&&(v.rotation=Math.PI/2)}s.addChild(v),s.arrow=v,s.addEventListener("hideArrow",function(){v.alpha=0,v.visible=!1}),s.addEventListener("showArrow",function(){v.alpha=1,v.visible=!0})}o.alpha=.4;var y=new PIXI.Graphics;function A(t,i){TweenMax.to(t,1.5,{delay:i,alpha:0,repeat:-1}),TweenMax.to(t.scale,1.5,{x:5,y:5,delay:i,repeat:-1})}return y.beginFill(16776960,0),y.drawRect(-50,-50,100,100),s.addChild(y),s.addEventListener(MouseEvent.MOUSE_OVER,function(){o.alpha=.6}),s.addEventListener(MouseEvent.MOUSE_OUT,function(){o.alpha=.4}),s.addEventListener(TouchEvent.TOUCH_BEGIN,function(){s.emit(s.event.TAP),!r&&s.parent&&s.parent.removeChild(s)}),s.x=t,s.y=i,s.setColor=function(t){var i=t>>16,e=t>>8&255,a=255&t;n._loadMatrix([i,0,0,0,0,0,e,0,0,0,0,0,a,0,0,0,0,0,255,0],!1),o.filters=[n]},s.setRotation=function(t){s.rotation=t},s.showAllDir=function(){if(h.direction)for(var t=0;t<3;t++){var i=new PIXI.Container;i.addChild(PIXI.Sprite.fromFrame("oneArrow")),s.addChild(i),i.pivot={x:0,y:v.height/2},i.rotation=Math.PI/2*(t+1)}else{var e=new PIXI.Container;e.addChild(PIXI.Sprite.fromFrame("NBarrow")),s.addChild(e),e.pivot={x:v.width/2,y:v.height/2},e.rotation=s.rotation+Math.PI/2}},s.event={TAP:"pointTap",HIDEARR:"hideArrow",SHOWARR:"showArrow"},instance.info&&instance.info.newLayOut&&s.scale.set(.6,.6),s}},240:function(t,i,e){"use strict";var a=function(t){return t&&t.__esModule?t:{default:t}}(e(169));nb.substance0010=extendsClass(ScienceMain,{frame0:function(){var t=this,i=instance.addParticle(t.spoon1.ani),e=instance.addParticle(t.spoon2.ani);i.visible=e.visible=!1,this.count=0,nb.spiritFunc.apply(this.spiritLamp,[{fire:ParticleUtil.particles.match_fire}]),this.spiritLamp.hideCover(!0),nb.matches.apply(this.matches),NBDrag.addDrag(this.spoon1),NBDrag.addDrag(this.spoon2),this.spoon1.tempMc.visible=this.spoon2.tempMc.visible=!1,nb.capacityContainer.apply(this.spoon1.ani),nb.capacityContainer.apply(this.spoon2.ani);var s=instance.getNBLib("0010");s.spoonFunc.apply(this.spoon1),s.spoonFunc.apply(this.spoon2),this.spoon1.ani.max_capacity=this.spoon1.ani.totalFrames,this.spoon2.ani.max_capacity=this.spoon2.ani.totalFrames,this.spoon1.ani.capacity=14,this.spoon2.ani.capacity=14;this.spoon1.temp=28,this.spoon2.temp=28;var n=(0,a.default)(65,40);t.matches.addChild(n);var r=(0,a.default)(0,80,!0);function h(){if(!t.spiritLamp.render()){var i=(0,a.default)(65,40);t.matches.addChild(i),t.matches.matchesPoint=i,instance.NBDownTip.showTip("拖动火柴点燃蜡烛")}if(t.spiritLamp.render()){var e=o(t.spoon1),s=o(t.spoon2);e||s||t.isHit||(t.spiritLamp.Point||(t.spiritLamp.addChild(r),t.spiritLamp.Point=r),instance.NBDownTip.showTip("拖动蜡烛给实验组勺子加热"))}}function o(i){return!!t.spiritLamp.fireArea.hitTest(i.ani)&&(i.hit=!0,!0)}function p(){t.spiritLamp.render()?t.spiritLamp.render()&&(t.spiritLamp.fireArea.hitTest(t.spoon1.ani)||t.spiritLamp.fireArea.hitTest(t.spoon2.ani)||t.isHit?t.spiritLamp.fireArea.hitTest(t.spoon1.ani)&&(t.isHit=!0):(t.spiritLamp.addChild(r),instance.NBDownTip.showTip("拖动蜡烛给实验组勺子加热"))):instance.NBDownTip.showTip("拖动火柴点燃蜡烛")}function l(){instance.NBDownTip.hideTip(),instance.NBDownTipsError.hideTip()}this.onUpdate=function(){if(this.spiritLamp.render()){this.spiritLamp.fireArea.hitTest(t.spoon2.ani)&&instance.NBDownTipsError.showTip("操作错误！请给实验组勺子加热"),this.spiritLamp.fireArea.hitTest(t.spoon1.ani)&&instance.NBDownTipsError.hideTip();for(var a=[this.spoon1,this.spoon2],s=0;s<a.length;s++){var n=a[s],h=this.spiritLamp.fireArea.getBounds(),o=n.ani.getBounds();NBPoint.distance({x:h.x+h.width/2,y:h.y+h.height},{x:o.x+o.width/2,y:o.y+o.height});if(56,this.spiritLamp.fireArea.hitTest(n.ani)&&0==n.ani.isFull()&&this.spiritLamp.y-n.y>$s(100)){t.isHit=!0,t.spiritLamp.Point&&t.spiritLamp.removeChild(r),TweenMax.killTweensOf(n.ani.particle),TweenMax.to(n.ani.particle,5,{alpha:.3}),n.ani.particle.visible=!0;var p=1-56/h.height,l=10-10*p;l=l<1?1:Math.round(l),n.temp>=65?(t.count%l==0&&(n.ani.capacity++,n.ani.capacity>=n.ani.max_capacity-1&&(t.onStepComplete(),TweenMax.to(n.ani.particle,1,{alpha:0,onComplete:function(){n.ani.removeChild(n.ani.particle)}}))),t.count++):n.temp+=1+p}else TweenMax.killTweensOf(n.ani.particle),TweenMax.to(n.ani.particle,5,{alpha:0});n.temp>28&&(n.temp-=1);var c=n.temp>=99?100:n.temp;n.setTemp(Math.round(10*c)/10)}}this.matches.render(),i.render(),e.render()},this.matches.addEventListener(TouchEvent.TOUCH_BEGIN,function(){instance.NBDownTip.hideTip(),instance.NBDownTipsError.hideTip(),t.matches.matchesPoint&&(t.matches.removeChild(t.matches.matchesPoint),t.matches.matchesPoint=null)}),this.matches.addEventListener(TouchEvent.TOUCH_END,h),this.matches.addEventListener(TouchEvent.TOUCH_END_OUDSIDE,h),this.spoon1.addEventListener(NBDrag.event.STOP_DRAG,p),this.spoon1.addEventListener(NBDrag.event.START_DRAG,l),this.spoon2.addEventListener(NBDrag.event.STOP_DRAG,p),this.spoon2.addEventListener(NBDrag.event.START_DRAG,l),this.spiritLamp.addEventListener(NBDrag.event.STOP_DRAG,p),this.spiritLamp.addEventListener(NBDrag.event.START_DRAG,function(){instance.NBDownTip.hideTip(),instance.NBDownTipsError.hideTip(),this.Point&&this.removeChild(r)})},frame1:function(){var t=this;this.count=0,nb.spiritFunc.apply(this.spiritLamp,[{fire:ParticleUtil.particles.match_fire}]),this.spiritLamp.hideCover(!0),nb.matches.apply(this.matches),NBDrag.addDrag(this.spoon1),NBDrag.addDrag(this.spoon2),this.spoon1.tempMc.visible=this.spoon2.tempMc.visible=!1,nb.capacityContainer.apply(this.spoon1.ani),nb.capacityContainer.apply(this.spoon2.ani);var i=instance.getNBLib("0010");i.spoonFunc.apply(this.spoon1),i.spoonFunc.apply(this.spoon2),this.spoon1.ani.max_capacity=this.spoon1.ani.totalFrames,this.spoon2.ani.max_capacity=this.spoon2.ani.totalFrames,this.spoon1.ani.capacity=14,this.spoon2.ani.capacity=14;this.spoon1.temp=28,this.spoon2.temp=28,this.onUpdate=function(){if(this.spiritLamp.render())for(var i=[this.spoon1,this.spoon2],e=0;e<i.length;e++){var a=i[e],s=this.spiritLamp.fireArea.getBounds(),n=a.ani.getBounds(),r=NBPoint.distance({x:s.x+s.width/2,y:s.y+s.height},{x:n.x+n.width/2,y:n.y+n.height});if(this.spiritLamp.fireArea.hitTest(a.ani)&&0==a.ani.isFull()&&this.spiritLamp.y-a.y>$s(100)){var h=1-r/s.height,o=10-10*h;o=o<1?1:Math.round(o),a.temp>=65?(t.count%o==0&&(a.ani.capacity++,a.ani.capacity>=a.ani.max_capacity-1&&t.onStepComplete()),t.count++):a.temp+=1+h}a.temp>28&&(a.temp-=1);var p=a.temp>=99?100:a.temp;a.setTemp(Math.round(10*p)/10)}this.matches.render()}},spoonFunc:function(){this.showTemp=function(){0==this.tempMc.visible&&(this.tempMc.visible=!0),this.tempMc.alpha<1&&(this.tempMc.alpha+=.05)},this.hideTemp=function(){this.tempMc.alpha>0?this.tempMc.alpha-=.05:this.tempMc.visible=!0},this.setTemp=function(t){this.tempMc.txt.text=t+"°"}},start:function(){this.menu.addStepFromObj(this.info),this.menu.setExperimentName(this.info.labName),this.showExperimentImport(this.info.experimentImport),this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"猜一猜水蒸发的速度和什么有关系？",labName:"加热能加快水蒸发",title0:"加热勺子观察现象",OPERATION_0:"将胶头滴管放入滴瓶点击吸水，在勺子上方点击胶头滴管滴入水滴。",OPERATION_1:"打开酒精灯瓶盖，点击任意空白地方召唤火柴接触酒精灯点燃。",CONCLUSION:"加热可以加快水的蒸发。"},const:{MATCH:"Match"},event:{},addParticle:function(t){var i=ParticleUtil.getParticle(ParticleUtil.particles.water_vapor);return t.addChild(i),t.particle=i,i.x=t.x+155,i.y=t.y-30,i.scale.x=1.4,i.scale.y=1.1,i.alpha=.3,i}}),nb.capacityContainer=function(){Object.defineProperty(this,"capacity",{get:function(){return this._capacity||0},set:function(t){t<=this.max_capacity&&t>=0&&(t<this.totalFrames&&this.gotoAndStop(t),this._capacity=t)}}),void 0==this.max_capacity&&(this.max_capacity=15),this.isFull=function(){return this.capacity==this.max_capacity},this.isEmpty=function(){return 0==this.capacity}},nb.spiritEvent={LIGHT_FILE:"lightFile",PUT_FILE:"putFile"},nb.spiritFunc=function(t){t=t||{};var i={x:this.corver.x,y:this.corver.y},e=this;NBDrag.addDrag(this.corver),NBDrag.addDrag(this),this.corver.on(NBDrag.event.START_DRAG,function(t){t.data.isPropagationStopped=!0,"spiritLamp"===this.parent.name&&this.parent.parent.addChildWithSamePos(this)}),this.corver.on(NBDrag.event.STOP_DRAG,function(){this.hitTest(e.body)&&(e.addChild(this),this.x=i.x,this.y=i.y,this.parent.putFire())}),this.lightFire=function(){this.corver.hitTest(this.body)&&!0===this.corver.visible||(null==this.fire&&(this.fire=ParticleUtil.getParticle(t.fire||ParticleUtil.particles.spirit_fire),void 0===t.fire&&(this.fire_blue=ParticleUtil.getParticle(ParticleUtil.particles.spirit_fire_blue),this.fire_blue.bind(this,$s(0),$s(10)),this.fire_blue.alpha=.2,this.fire_blue.visible=!0,this.parent.addChildAt(this.fire_blue,e.parent.getChildIndex(e)+1)),this.parent.addChildAt(this.fire,e.parent.getChildIndex(e)+1),this.fire.bind(this,$s(-10),$s(10)),this.fire.alpha=.6),this.fire.visible=!0,this.emit(nb.spiritEvent.LIGHT_FILE))},this.putFire=function(){this.fire&&(this.fire.visible=!1,this.fire.destroy(),this.fire=null,this.emit(nb.spiritEvent.PUT_FILE)),this.fire_blue&&(this.fire_blue.visible=!0,this.fire_blue.destroy(),this.fire_blue=null)},this.render=function(){return!!this.isBurning()&&(this.fire&&this.fire.render(),this.fire_blue&&this.fire_blue.render(),!0)},this.isBurning=function(){return this.fire&&this.fire.visible},this.hideCover=function(t){this.cover.visible=!t},this.cover=this.corver},nb.matches=function(){SoundManager.register({src:"courses/substance0010/res/match.mp3",id:"0010/match"});var t=this,i=this.parent.match;i.visible=!1,NBDrag.addDrag(i);var e=null;function a(){i.visible=!1,t.putFire()}this.addEventListener(TouchEvent.TOUCH_BEGIN,function(t){var a=this.getBounds();i.visible=!0,i.alpha=1,i.x=this.x-(a.x-t.data.global.x)-$s(100),i.y=this.y-(a.y-t.data.global.y)-$s(40),null==e&&((e=ParticleUtil.getParticle(ParticleUtil.particles.match_fire)).alpha=.4,this.stepRoot.addChild(e),e.bind(i,0,$s(50))),e.visible=!0,TouchEvent.simulateTouchDown(i,t),i.sound=SoundManager.play("0010/match")}),this.addEventListener(TouchEvent.TOUCH_END_OUDSIDE,function(){a()}),i.addEventListener(NBDrag.event.STOP_DRAG,function(){a()}),this.render=function(){1==i.visible&&e&&e.render()},i.addEventListener(TouchEvent.TOUCH_MOVE,function(){this.parent&&this.parent.spiritLamp&&this.fireArea.hitTest(this.parent.spiritLamp.head)&&this.parent.spiritLamp.lightFire()}),this.putFire=function(){null!=e&&(e.visible=!1,e.destroy(),e=null),i.sound&&(i.sound.stop(),i.sound=null)},this.hideMatch=a,this.isBurning=function(){return null!=e}},nb.buretteEvent={BURETTE_POP:"burettePop",BURETTE_TAP:"buretteTap"},nb.buretteInfo={EMPTY:"请先在滴管中吸入液体"},nb.burette=function(){var t=!0,i=this;this.dropColor=16777215,this.MAX_BOTTLE_CAPACITY=1e3,this.MAX_BURETTE_CAPACITY=15,this.bottle.topValue=this.bottle.water_top.y,this.bottle.bottomValue=this.bottle.water_bottom.y,this.bottle.max_capacity=this.MAX_BOTTLE_CAPACITY,this.burette.movie.max_capacity=this.MAX_BURETTE_CAPACITY,this.isCorver=function(){return this.burette.movie.hitTest(this.head)};var e={x:this.burette.x,y:this.burette.y},a=this;NBDrag.addDrag(this.burette),NBDrag.addDrag(this),nb.capacityContainer.apply(this.burette.movie),this.burette.movie.isFull=this.bottle.isFull=function(){return this.capacity==this.max_capacity},this.burette.movie.isEmpty=this.bottle.isEmpty=function(){return 0==this.capacity},Object.defineProperty(this.bottle,"capacity",{get:function(){return this._capacity||0},set:function(t){var i=-(this.topValue-this.bottomValue);this._capacity=t;var e=t/a.MAX_BOTTLE_CAPACITY;this.water_middle.height=i*e,this.water_top.y=this.bottomValue-i*e}}),this.setEnabled=function(i){t=i,!1===i&&TweenMax.killTweensOf(this.burette)},this.getEnabled=function(){return t},this.bottle.capacity=this.MAX_BOTTLE_CAPACITY;var s=this.parent;this.burette.on(NBDrag.event.START_DRAG,function(t){t.data.isPropagationStopped=!0,TweenMax.killTweensOf(this),s.addChildWithSamePos(this)}),this.burette.on(NBDrag.event.STOP_DRAG,function(){a.isCorver()&&(this.x=e.x,this.y=e.y,i.addChildAt(this,0))}),NBGesture.addGesture(this.burette,NBGesture.gesture.TAP,function(){if(i.emit(nb.buretteEvent.BURETTE_TAP),!1!==t){var e=a.burette.movie.capacity;!1!==a.isCorver()||!0!==a.burette.movie.isEmpty()?TweenMax.to(this,1.5,{onUpdate:function(){if(a.isCorver())0==a.burette.movie.isFull()&&0==a.bottle.isEmpty()&&this.progress()>(a.burette.movie.capacity-e)/(a.burette.movie.max_capacity-e)&&(a.burette.movie.capacity++,a.bottle.capacity--);else if(0==a.burette.movie.isEmpty()&&1-this.progress()<a.burette.movie.capacity/e){a.burette.movie.capacity--;var t=new PIXI.Graphics;t.beginFill(i.dropColor,.3),t.drawEllipse(0,0,$s(6),$s(12)),a.stepRoot.addChild(t);var s=a.stepRoot.toLocal({x:a.burette.width/2,y:a.burette.height},a.burette);t.x=s.x,t.y=s.y,t.destory=function(){this.parent&&(TweenMax.killTweensOf(this),this.parent.removeChild(this))},TweenMax.to(t,1,{y:t.y+$s(800),alpha:0,onComplete:function(t){t.destory()},onCompleteParams:[t]}),a.emit(nb.buretteEvent.BURETTE_POP,{target:a.burette,drop:t})}}}):instance.NBDownTipsError.showTip(nb.buretteInfo.EMPTY)}})},t.exports=nb.substance0010},324:function(t,i,e){"use strict";var a=function(t){return t&&t.__esModule?t:{default:t}}(e(169));e(240),nb.substance0085=extendsClass(ScienceMain,{frame0:function(){var t=this,i=new nb.Box2d(this);this.onUpdate=function(){i.render()};var e=(0,a.default)(0,6);this.copper.addChild(e),this.copper.tapPoint=e;var s=0,n=!0;this.copper.addEventListener(NBDrag.event.DRAG_MOVE,function(){n||instance.NBDownTipsError.showTip("步骤一已完成"),this.tapPoint&&this.removeChild(this.tapPoint),t.ball.hitArea.hitTest(t.hitArea)&&(s=1,t.onStepComplete())});var r=!0;t.Fe.addEventListener(TouchEvent.TAP,function(){r&&0===s&&(instance.NBDownTip.showTip("请将铜球穿过铁环"),r=!1)}),this.copper.addEventListener(NBDrag.event.STOP_DRAG,function(){0!==s||t.ball.hitArea.hitTest(t.hitArea)||instance.NBDownTip.showTip("请将铜球穿过铁环"),1===s&&n&&(instance.NBStepsShow(!0,1),n=!1)}),this.copper.addEventListener(NBDrag.event.START_DRAG,function(){instance.NBDownTip.hideTip()})},frame1:function(){var t=this,i=this,e=!0,s=0,n=(0,a.default)(0,0,!0);this.spiritLamp.corver.addChild(n),n.addEventListener(n.event.TAP,function(){s=1}),nb.spiritFunc.apply(this.spiritLamp),nb.matches.apply(this.matches);var r=new nb.Box2d(this);instance.ballFunc.apply(this.ball);var h=(0,a.default)(25,-50,!0),o=(0,a.default)(60,80),p=(0,a.default)(0,60);this.onUpdate=function(){e&&1===s&&this.spiritLamp.corver.dis>=10&&(s=2),e&&2===s&&this.spiritLamp.isBurning()&&4!==s&&(s=3),this.matches.render(),this.spiritLamp.render()&&this.spiritLamp.fireArea.hitTest(this.ball.black)&&this.spiritLamp.y-this.ball.y>$s(70)&&(this.ball.black.alpha>0?this.ball.black.alpha-=instance.const.INC_TEMP:(this.ball.black.alpha=0,e&&this.ball.getPercent()>.9&&3===s&&(this.spiritLamp.removeChild(p),this.hitArea.addChild(h),s=4),4===s&&this.ball.getPercent()<.35&&this.hitArea.removeChild(h))),r.render(),this.ball.render(),this.ball.redBall.hitTest(this.b1)&&this.ball.redBall.hitTest(this.b2)&&this.ball.getPercent()>.35&&this.ball.redBall.hitTest(this.hitArea)&&(this.onStepComplete(),this.hitArea.removeChild(h))};var l=!1;this.spiritLamp.corver.startX=this.spiritLamp.corver.x,this.spiritLamp.corver.startY=this.spiritLamp.corver.y,this.spiritLamp.corver.addEventListener(NBDrag.event.START_DRAG,function(){instance.NBDownTip.hideTip(),e?(t.spiritLamp.corver.removeChild(n),instance.NBDownTipsError.hideTip()):instance.NBDownTipsError.showTip("步骤二已完成"),4!==s&&(s=1)}),this.spiritLamp.corver.addEventListener(NBDrag.event.STOP_DRAG,function(){t.spiritLamp.corver.dis=Math.sqrt(Math.pow(t.spiritLamp.corver.x-t.spiritLamp.corver.startX,2)+Math.pow(t.spiritLamp.corver.y-t.spiritLamp.corver.startY,2)),t.spiritLamp.corver.dis>0?(l=!0,e&&!t.spiritLamp.render()&&4!==s&&i.matches.addChild(o)):(4!==s&&t.spiritLamp.corver.addChild(n),t.spiritLamp.removeChild(p),i.matches.removeChild(o),l=!1),e&&t.spiritLamp.render()&&!t.spiritLamp.fireArea.hitTest(t.ball.black)&&t.ball.getPercent()<.9&&instance.NBDownTip.showTip("请加热铜球到最高温度"),e&&!t.ball.redBall.hitTest(t.b1)&&!t.ball.redBall.hitTest(t.b2)&&t.ball.getPercent()>.9&&!t.ball.redBall.hitTest(t.hitArea)&&instance.NBDownTip.showTip("请将加热铜球穿过铁环观察")});var c=!1;this.match.addEventListener(NBDrag.event.START_DRAG,function(){instance.NBDownTip.hideTip(),i.matches.removeChild(o),e?instance.NBDownTipsError.hideTip():instance.NBDownTipsError.showTip("步骤二已完成")}),this.match.addEventListener(NBDrag.event.STOP_DRAG,function(){e&&!t.spiritLamp.render()?(instance.NBDownTipsError.showTip("请打开酒精灯帽"),e&&t.spiritLamp.corver.dis>0&&4!==s&&(i.matches.addChild(o),c=!1),l&&instance.NBDownTip.showTip("请用火柴点燃酒精灯")):e&&4!==s&&(t.spiritLamp.addChild(p),c=!0),e&&!t.spiritLamp.render()?(l&&instance.NBDownTip.showTip("请用火柴点燃酒精灯"),e&&4!==s&&t.spiritLamp.corver.dis>0&&c&&t.spiritLamp.addChild(p)):e&&t.spiritLamp.corver.dis>0&&t.spiritLamp.render()&&t.spiritLamp.removeChild(p),e&&t.spiritLamp.render()&&!t.spiritLamp.fireArea.hitTest(t.ball.black)&&t.ball.getPercent()<.9&&(instance.NBDownTip.showTip("请加热铜球到最高温度"),e&&4!==s&&t.spiritLamp.addChild(p)),e&&!t.ball.redBall.hitTest(t.b1)&&!t.ball.redBall.hitTest(t.b2)&&t.ball.getPercent()>.9&&!t.ball.redBall.hitTest(t.hitArea)&&instance.NBDownTip.showTip("请将加热铜球穿过铁环观察")}),this.spiritLamp.addEventListener(NBDrag.event.STOP_DRAG,function(){e&&!t.spiritLamp.render()?(t.ball.getPercent()<.9&&instance.NBDownTip.showTip("请打开酒精灯帽"),l&&instance.NBDownTip.showTip("请用火柴点燃酒精灯"),e&&4!==s&&t.spiritLamp.corver.dis>0&&c&&t.spiritLamp.addChild(p)):e&&t.spiritLamp.corver.dis>0&&t.spiritLamp.render()&&t.spiritLamp.removeChild(p),e&&t.spiritLamp.render()&&!t.spiritLamp.fireArea.hitTest(t.ball.black)&&t.ball.getPercent()<.9&&(instance.NBDownTip.showTip("请加热铜球到最高温度"),e&&4!==s&&t.spiritLamp.addChild(p)),e&&!t.ball.redBall.hitTest(t.b1)&&!t.ball.redBall.hitTest(t.b2)&&t.ball.getPercent()>.9&&!t.ball.redBall.hitTest(t.hitArea)&&instance.NBDownTip.showTip("请将加热铜球穿过铁环观察")}),this.spiritLamp.addEventListener(NBDrag.event.START_DRAG,function(){t.spiritLamp.removeChild(p),e?instance.NBDownTipsError.hideTip():instance.NBDownTipsError.showTip("步骤二已完成"),instance.NBDownTip.hideTip()}),this.copper.addEventListener(NBDrag.event.STOP_DRAG,function(){t.ball.redBall.hitTest(t.b1)&&t.ball.redBall.hitTest(t.b2)&&t.ball.getPercent()>.35&&t.ball.redBall.hitTest(t.hitArea)&&e&&(instance.NBStepsShow(!0,2),e=!1),e&&!t.spiritLamp.render()&&t.ball.getPercent()<.95&&l?instance.NBDownTip.showTip("请用火柴点燃酒精灯"):e&&!t.spiritLamp.render()&&t.ball.getPercent()<.15&&instance.NBDownTip.showTip("请打开酒精灯帽"),e&&t.spiritLamp.render()&&!t.spiritLamp.fireArea.hitTest(t.ball.black)&&t.ball.getPercent()<.9&&!t.ball.redBall.hitTest(t.b1)&&instance.NBDownTip.showTip("请加热铜球到最高温度"),e&&!t.ball.redBall.hitTest(t.b1)&&!t.ball.redBall.hitTest(t.b2)&&t.ball.getPercent()>.9&&!t.ball.redBall.hitTest(t.hitArea)&&instance.NBDownTip.showTip("请将加热铜球穿过铁环观察")}),this.copper.addEventListener(NBDrag.event.START_DRAG,function(){e?instance.NBDownTipsError.hideTip():instance.NBDownTipsError.showTip("步骤二已完成"),instance.NBDownTip.hideTip()})},frame2:function(){var t=0,i=(0,a.default)(10,10,!0),e=this;e.point_high.addChild(i);var s=new nb.Box2d(this),n=null,r=ParticleUtil.getParticle(ParticleUtil.particles.water_vapor);e.addChild(r),r.alpha=0;var h=0,o=1,p=0,l=(0,a.default)(25,-50,!0),c=!0,d=!0;this.onUpdate=function(){if(s.render(),r.render(),this.ball.render(),d&&e.ball.getPercent()<.01&&c&&(p=2,e.hitArea.addChild(l),c=!1),e.ball.getPercent()<=.01&&e.point_high.children[1]&&e.point_high.removeChild(e.point_high.children[1]),this.ball.black.hitTest(e.skinArea)&&e.ball.getPercent()>.01){e.point_high.children[1]&&e.point_high.removeChild(e.point_high.children[1]),o=0,h=.5,r.y=e.skinArea.y,r.x=this.ball.x-$s(e.ball.width/2)+$s(20),r.scale.x=2,r.scale.y=1,r.alpha=.5;var t=e.ball.getPercent(),i=e.skinArea.y-e.ball.y;if(i<$s(70))i<0&&(i=0),t-=($s(70)-i)/$s(70)*.01,this.ball.setPercent(t),null==n&&(n=SoundManager.play(instance.const.STEAM))}else o=1,r.y=e.skinArea.y,r.x=this.ball.x-$s(e.ball.width/2)+$s(20),h-=.02,r.alpha=h},instance.ballFunc.apply(e.ball),e.ball.setPercent(1);var m=!1;function u(t,i,e,a){if(t>=a.x-a.width/2&&t<=a.x+a.width/2&&i>=a.y-a.width/2&&i<=a.y+a.width/2)return!0}e.copper.addEventListener(NBDrag.event.DRAG_MOVE,function(){e.ball.hitArea.hitTest(e.hitArea)&&e.onStepComplete(),(u(e.hitArea.x-e.hitArea.width/2,e.hitArea.y-e.hitArea.height/2,e.hitArea,e.ball)||u(e.hitArea.x+e.hitArea.width/2,e.hitArea.y+e.hitArea.height/2,e.hitArea,e.ball)||u(e.hitArea.x-e.hitArea.width/2,e.hitArea.y+e.hitArea.height/2,e.hitArea,e.ball)||u(e.hitArea.x+e.hitArea.width/2,e.hitArea.y-e.hitArea.height/2,e.hitArea,e.ball))&&(m=!0),m&&(console.log("完成"),e.hitArea.removeChild(e.hitArea.children[1]))}),this.copper.addEventListener(NBDrag.event.START_DRAG,function(){instance.NBDownTip.hideTip(),0===t&&(t=1)}),this.copper.addEventListener(NBDrag.event.STOP_DRAG,function(){d&&o&&e.ball.getPercent()>.1&&1===t&&instance.NBDownTip.showTip("将铜球放入水中冷却"),m?(d=!1,e.hitArea.removeChild(e.hitArea.children[1])):d&&2===p&&instance.NBDownTip.showTip("请将铜球穿过铁环")})},start:function(){this.menu.addStepFromObj(this.info),this.menu.setExperimentName(this.info.labName),this.showExperimentImport(this.info.experimentImport),this.bindScriptToSprite(this.frame0,"frame0"),this.bindScriptToSprite(this.frame1,"frame1"),this.bindScriptToSprite(this.frame2,"frame2"),this.bindScriptToSprite(this.conclusion,"frame3"),this.gotoStep("frame0")},ballFunc:function(){var t=new nb.ProgressBar(this,$s(100),$s(5),this.width/2+$s(10),this.height/2-$s(20));t.getShape().rotation=-Math.PI/2,this.render=function(){this.black.alpha<1?this.black.alpha+=instance.const.RED_TEMP:this.black.alpha=1;var t=1-this.black.alpha;this.setPercent(t)},this.setPercent=function(i){i>1?i=1:i<0&&(i=0),this.black.alpha=1-i;var e=i;t.setPercent(e),nb.Box2d.setBodyScale(this.b2Body,1+.05*e),this.redBall.scale.x=this.redBall.scale.y=1+.05*e,t.getShape().alpha=e},this.getPercent=function(){return 1-this.black.alpha}},info:{experimentImport:"气体、液体都有热胀冷缩的性质。大多数金属也有热胀冷缩的性质。所以为了保证火车的正常运行，钢轨之间要留有缝隙。",labName:" 金属的热胀冷缩",title0:"拖动铜球通过铁圈",title1:"加热铜球使其通过铁圈",title2:"冷却铜球，使铜球通过铁圈",CONCLUSION:"铜球有热胀冷缩的性质。"},const:{MATCH:"match",STEAM:"steam",INC_TEMP:.005,RED_TEMP:5e-4},event:{}}),nb.ProgressBar=extendsClass(Object,{init:function(t,i,e,a,s){var n=new PIXI.Graphics;t.addChild(n),n.x=a,n.y=s,this.shape=n,this.w=i,this.h=e},setPercent:function(t){this.shape.clear(),this.shape.lineStyle($s(2),16777215),this.shape.drawRect(0,0,this.w,this.h),this.shape.beginFill(9570179,1),this.shape.drawRect(0,0,this.w*t,this.h)},getShape:function(){return this.shape}}),t.exports=nb.substance0085}});