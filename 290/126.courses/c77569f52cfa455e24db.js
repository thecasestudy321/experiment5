webpackJsonp([126],{415:function(e,t,a){"use strict";var n=i(a(520)),r=i(a(522));function i(e){return e&&e.__esModule?e:{default:e}}nb.substance0589=extendsClass(ScienceMain,{frame0:function(){var e=this;instance.viewStack.NBONOFF.visible=!1,r.default.apply(e.from),n.default.init.apply(e.timeline);var t=[e.Left1,e.Left2,e.Left3],a=[e.Right1,e.Right2,e.Right3],i=[e.validation,e.left.cover,e.left.towelUnder,e.left.foamUnder,e.left.towelAbove,e.left.foamAbove],o=[e.validation,e.right.cover,e.right.towelUnder,e.right.foamUnder,e.right.towelAbove,e.right.foamAbove],l=[e.dragCover,e.dragTowel,e.dragFoam],h=[e.from.dragForm.a0,e.from.dragForm.a01,e.from.dragForm.a02,e.from.dragForm.a03,e.from.dragForm.a012,e.from.dragForm.a013,e.from.dragForm.a025,e.from.dragForm.a034,e.from.dragForm.a0125,e.from.dragForm.a0134],d=0,s=0,c=[],p="拖动物品到杯子处，做一个最保暖的保温杯",g=e.tip.x;e.txt1.alpha=e.txt2.alpha=e.timeline.alpha=0;var f=0,x=0;function m(){e.setChildIndex(this,e.children.length-1),this.hitTest(e.left)?u(this,e.left):this.hitTest(e.right)&&u(this,e.right)}function u(n,r){var i=-1==l.indexOf(n)?c.indexOf(n):l.indexOf(n);TweenMax.to(n,.4,{alpha:1}),"left"==r.name?T(t,i,e.letJia1,e.leftJia2):"right"==r.name&&T(a,i,e.rightJia1,e.rightJia2),"Cover"==n.name.split("drag")[1]?TweenMax.to(r.cover,.4,{alpha:0}):"Towel"==n.name.split("drag")[1]?TweenMax.to([r.towelUnder,r.towelAbove],.4,{alpha:0}):"Foam"==n.name.split("drag")[1]&&TweenMax.to([r.foamUnder,r.foamAbove],.4,{alpha:0})}function v(e,t,a,n){0==e[0].alpha?(e[0].currentFrame=t,TweenMax.to(e[0],.2,{alpha:1})):0==e[1].alpha?(e[1].currentFrame=t,TweenMax.to([e[1],a],.2,{alpha:1})):0==e[2].alpha&&(e[2].currentFrame=t,TweenMax.to([e[2],n],.2,{alpha:1}))}function T(e,t,a,n){e.forEach(function(r,i){r.currentFrame==t&&(0==i?0==e[1].alpha?(r.alpha=0,a.alpha=0):1==e[2].alpha?(e[2].alpha=0,r.currentFrame=e[2].currentFrame,n.alpha=0):(e[1].alpha=0,r.currentFrame=e[1].currentFrame,a.alpha=0):1==i?0==e[2].alpha?(a.alpha=0,r.alpha=0):(r.currentFrame=e[2].currentFrame,e[2].alpha=0,n.alpha=0):2==i&&(e[2].alpha=0,n.alpha=0))})}function w(n,r,i,o,l){"left"==l.name?v(t,r,e.letJia1,e.leftJia2):"right"==l.name&&v(a,r,e.rightJia1,e.rightJia2)}function C(){this.hitTest(e.left)?M(this,e.left):this.hitTest(e.right)?M(this,e.right):TweenMax.to(this,.4,{x:this.startX,y:this.startY})}function M(t,a){var n=-1==l.indexOf(t)?c.indexOf(t):l.indexOf(t);TweenMax.to(e.validation,.4,{alpha:1,onComplete:function(){e.validation.removeEventListener(TouchEvent.TAP,A),e.validation.addEventListener(TouchEvent.TAP,A),"设计完成后点击“加入开水”按钮进行验证"!==e.tip.text&&(nb.scienceCommonFun.resetName(e.tip,"设计完成后点击“加入开水”按钮进行验证"),p="设计完成后点击“加入开水”按钮进行验证")}}),"Cover"==t.name.split("drag")[1]?0===a.cover.alpha?(w(0,n,e.letJia1,e.leftJia2,a),TweenMax.to(t,.4,{x:a.x+2*t.width/5,y:a.y+t.height/2,onComplete:function(){a.cover.alpha=1,t.alpha=0}})):TweenMax.to(t,.4,{x:t.startX,y:t.startY}):"Towel"==t.name.split("drag")[1]?0===a.towelUnder.alpha&&0===a.towelAbove.alpha?(w(0,n,e.letJia1,e.leftJia2,a),TweenMax.to(t,.4,{alpha:0,x:a.x+2*t.width/5,y:a.y+t.height}),0===a.foamUnder.alpha?TweenMax.to(a.towelUnder,.4,{alpha:1}):TweenMax.to(a.towelAbove,.4,{alpha:1})):TweenMax.to(t,.4,{x:t.startX,y:t.startY}):0===a.foamUnder.alpha&&0===a.foamAbove.alpha?(w(0,n,e.letJia1,e.leftJia2,a),TweenMax.to(t,.4,{alpha:0,x:a.x+t.width/2,y:a.y+5*t.height/4}),0===a.towelUnder.alpha?TweenMax.to(a.foamUnder,.4,{alpha:1}):TweenMax.to(a.foamAbove,.4,{alpha:1})):TweenMax.to(t,.4,{x:t.startX,y:t.startY})}e.noDrag.alpha=.5,e.timeline.startY=e.timeline.y,e.timeline.y=$("canvas")[0].height,e.left.cover.alpha=0,t.forEach(function(e,t){e.alpha=0,a[t].alpha=0}),i.forEach(function(e,t){e.index=t,e.alpha=0,o[t].alpha=0,o[t].index=t}),l.forEach(function(t){var a=t.clone();t.name=a.name,t.startX=t.x,t.startY=t.y,c.push(a),a.startX=a.x,a.startY=a.y,e.addChildAt(a,e.children.length-1),NBDrag.addDrag(t),NBDrag.addDrag(a),t.addEventListener(NBDrag.event.START_DRAG,m),t.addEventListener(NBDrag.event.STOP_DRAG,C),a.addEventListener(NBDrag.event.START_DRAG,m),a.addEventListener(NBDrag.event.STOP_DRAG,C)}),e.validation.alpha=0,e.goBack.alpha=0,e.leftCup.alpha=0,e.rightCup.alpha=0,e.dragCover.startX=e.dragCover.x,e.dragCover.startY=e.dragCover.y,e.dragTowel.startX=e.dragTowel.x,e.dragTowel.startY=e.dragTowel.y,e.dragFoam.startX=e.dragFoam.x,e.dragFoam.startY=e.dragFoam.y,h.forEach(function(e){e.alpha=0}),e.letJia1.alpha=0,e.leftJia2.alpha=0,e.rightJia1.alpha=0,e.rightJia2.alpha=0;var y=[],F=[],E=[],D=!1;function A(){this.interactive=!1,TweenMax.to(this,.4,{alpha:0}),i.forEach(function(e,t){1===e.alpha&&(d+=e.index.toString()),1===o[t].alpha&&(s+=o[t].index.toString())}),0==parseInt(d)||0==parseInt(s)?(0==parseInt(d)&&(-1===F.indexOf(s)&&-1===E.indexOf(s)||(D=!0)),0==parseInt(s)&&(-1===F.indexOf(d)&&-1===E.indexOf(d)||(D=!0))):-1!==y.indexOf(d)&&-1!==y.indexOf(s)&&(D=!0),d=s=0,i.forEach(function(e,t){1===e.alpha&&(d+=e.index.toString()),1===o[t].alpha&&(s+=o[t].index.toString())}),d==s?O("两边不能相同","点击杯子上的物品取下，重新设计"):D?(O("已经对比过的组合",null),D=!1):(0==parseInt(d)?E.push(s):0==parseInt(d)?F.push(d):(-1!=y.indexOf(d)||D||0===parseInt(d)||y.push(d),-1!=y.indexOf(s)||D||0===parseInt(s)||y.push(s)),b(!1),e.goBack.interactive=!0,e.leftCup.alpha=1,e.rightCup.alpha=1,TweenMax.to(e.from.dragForm,.4,{onComplete:function(){TweenMax.to(e.from.dragForm,.4,{onComplete:function(){TweenMax.to([e.leftCup,e.rightCup],.4,{alpha:1,onComplete:function(){1===e.left.cover.alpha&&TweenMax.to(e.left.cover,.4,{rotation:-70*Math.PI/180,onComplete:function(){N()}}),1===e.right.cover.alpha&&TweenMax.to(e.right.cover,.4,{rotation:-70*Math.PI/180,onComplete:function(){N()}}),1!==e.left.cover.alpha&&1!==e.right.cover.alpha&&N()}})}})}})),d=s=0}function O(t,a){e.tip.text=t,e.tip.style.fill="#FF0000",e.tip.updateText(),TweenMax.to(e.tip,.3,{x:"+= 20",yoyo:!0,repeat:3,ease:Power0.easeNone,onComplete:function(){e.tip.text=null!==a?a:p,e.tip.style.fill="#FFFFFF",e.tip.x=g,e.tip.updateText()}})}function N(){i.forEach(function(e,t){1===e.alpha&&(d+=e.index.toString()),1===o[t].alpha&&(s+=o[t].index.toString())}),x=parseInt(e.from.dragForm["a"+d].txt.text),f=parseInt(e.from.dragForm["a"+s].txt.text),d=s=0,TweenMax.to([e.leftCup,e.rightCup],1.5,{currentFrame:32,ease:Power0.easeNone,onComplete:function(){e.leftCup.currentFrame=e.rightCup.currentFrame=5,TweenMax.to([e.leftCup,e.rightCup],1,{currentFrame:32,ease:Power0.easeNone,onComplete:function(){TweenMax.to([e.leftCup,e.rightCup],.4,{alpha:0,delay:.2,currentFrame:35,onComplete:function(){e.leftCup.currentFrame=e.rightCup.currentFrame=0,TweenMax.to([e.left.cover,e.right.cover],.4,{rotation:0}),TweenMax.to([e.noDrag,e.describ],.4,{alpha:0,onComplete:function(){TweenMax.to([e.txt1,e.txt2],.4,{alpha:1}),TweenMax.to(e.timeline,.4,{alpha:1,delay:.4,y:e.timeline.startY,onComplete:function(){e.timeline.setAutoPlay(!0,2),e.timeline.a0.interactive=!1,e.timeline.a1.interactive=!1}})}})}})}})}})}function _(){e.goBack.interactive=!0,h.forEach(function(e){parseInt(e.txt.text)!=x&&parseInt(e.txt.text)!=f||(e.alpha=1)}),TweenMax.to(e.from.dragForm,.4,{onComplete:function(){"点击“返回”按钮，重新设计比较"!==e.tip.text&&(nb.scienceCommonFun.resetName(e.tip,"点击“返回”按钮，重新设计比较"),p="点击“返回”按钮，重新设计比较"),e.goBack.alpha=1,e.goBack.addEventListener(TouchEvent.TAP,P)}})}function P(){this.alpha=0,e.timeline.y=$("canvas")[0].height,e.left.cover.alpha=0,t.forEach(function(e,t){e.alpha=0,a[t].alpha=0}),i.forEach(function(e,t){e.alpha=0,o[t].alpha=0}),e.dragCover.x=e.dragCover.startX,e.dragCover.y=e.dragCover.startY,e.dragTowel.x=e.dragTowel.startX,e.dragTowel.y=e.dragTowel.startY,e.dragFoam.x=e.dragFoam.startX,e.dragFoam.y=e.dragFoam.startY,e.dragCover.alpha=1,e.dragTowel.alpha=1,e.dragFoam.alpha=1,e.left.cover.rotation=0,e.right.cover.rotation=0,e.leftCup.rotation=0,e.rightCup.rotation=0,d=0,s=0,t.forEach(function(e,t){e.alpha=0,a[t].alpha=0,c[t].alpha=1,c[t].x=c[t].startX,c[t].y=c[t].startY}),b(!0),e.goBack.interactive=!1,e.letJia1.alpha=0,e.leftJia2.alpha=0,e.rightJia1.alpha=0,e.rightJia2.alpha=0,"拖动物品到杯子处，做一个最保暖的保温杯"!==e.tip.text&&(nb.scienceCommonFun.resetName(e.tip,"拖动物品到杯子处，做一个最保暖的保温杯"),p="拖动物品到杯子处，做一个最保暖的保温杯")}function b(t){l.forEach(function(e,a){e.interactive=t,c[a].interactive=t,t||TweenMax.to([c[a],e],.4,{alpha:0})}),e.validation.interactive=t,e.goBack.interactive=t}e.timeline.addEventListener(n.default.event.ON_PLAY,function(t){var a=parseInt(60-(60-x)*t.time),n=parseInt(60-(60-f)*t.time);e.txt1.txt.text=a,e.txt2.txt.text=n}),e.timeline.addEventListener(n.default.event.ON_COMPLETE,function(){TweenMax.to([e.txt1,e.txt2],.4,{alpha:0,delay:.3,onComplete:function(){e.txt1.txt.text=e.txt2.txt.text="60"}}),TweenMax.to([e.describ],.4,{alpha:1,delay:.3}),TweenMax.to([e.noDrag],.4,{alpha:.5,delay:.3}),TweenMax.to(e.timeline,.4,{alpha:0,y:$("canvas")[0].height,onComplete:function(){e.timeline.setAutoPlay(!1),e.timeline.drag.x=e.timeline.a0.x}}),1===e.left.cover.alpha&&TweenMax.to(e.left.cover,.4,{onComplete:function(){_()}}),1===e.right.cover.alpha&&TweenMax.to(e.right.cover,.4,{onComplete:function(){_()}}),1!==e.left.cover.alpha&&1!==e.right.cover.alpha&&_()})},start:function(){this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"怎样使杯中的水凉得慢一些，尝试做一个保温杯吧。",labName:"做一个保温杯",CONCLUSION:"保温杯只能减缓物体温度的变化，而不能保持原来的温度。",newLayOut:!0,bgColor:"#F3E6CF"},const:{},event:{}}),e.exports=nb.substance0589},520:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={event:{CLICK_NODE:"nodeTap",CLICK_NODE_REACHED:"nodeTapReached",ON_COMPLETE:"timelineComplete",ON_PLAY:"timelinePlaying",REACHED_NODE:"reachedNode",START_DRAG:"startDrag",DRAGING:"draging",STOP_DRAG:"stopDrag"},init:function(){var e,t,a=this;if(a.bgMask){var r=a.bgMask.getChildAt(0);a.progressBar.mask=r,r.scale.x=0}var i=this.a0.x===this.a1.x?"vertical":"horizontal",o=0,l=[];a.drag.lastPos={x:a.drag.x,y:a.drag.y};for(var h=0;h<int.MAX_VALUE;h++){var d=this["a"+h];if(void 0===d){t="vertical"===i?this["a"+(h-1)].y:this["a"+(h-1)].x,o=h;break}l.push(d),0===h&&(e="vertical"===i?d.y:d.x),d.addEventListener(TouchEvent.TAP,function(){var e=this;"vertical"===i?TweenMax.to(a.drag,.5,{y:this.y}):TweenMax.to(a.drag,.5,{x:this.x,onComplete:function(){a.emit(n.event.CLICK_NODE_REACHED,{index:e.name.substr(1,1)})}}),this.totalFrames&&(l.forEach(function(e){return e.currentFrame=0}),this.currentFrame=1),a.drag.lastPos={x:this.x,y:this.y},a.emit(n.event.CLICK_NODE,{index:this.name.substr(1,1)})})}this.setDrag=function(r){r?(NBDrag.addDrag(a.drag),a.drag.on(NBDrag.event.START_DRAG,function(){var r=(a.drag.x-e)/(t-e);a.emit(n.event.START_DRAG,{time:r})}),a.drag.on(NBDrag.event.DRAG_MOVE,function(){var r=(a.drag.x-e)/(t-e);a.emit(n.event.DRAGING,{time:r})}),a.drag.on(NBDrag.event.STOP_DRAG,function(){var r=(a.drag.x-e)/(t-e);a.emit(n.event.STOP_DRAG,{time:r}),r>=1&&a.emit(n.event.ON_COMPLETE,{time:r})})):NBDrag.removeDrag(a.drag)},a.drag.addEventListener(NBDrag.event.STOP_DRAG,function(){if(!1!==a._align_){var n=o-1;if("vertical"===i){var r=Math.round((this.y-e)/(t-e)*n);r<0&&(r=0)}else{var l=Math.round((this.x-e)/(t-e)*n);l<0&&(l=0)}}}),a.drag.addEventListener(NBDrag.event.DRAG_MOVE,function(){p()});var s=!1;a.drag.constY=a.drag.y;var c,p=function(){a.drag.y=a.drag.constY,a.drag.x>=t&&(a.drag.x=t),a.drag.x<=e&&(a.drag.x=e);var r=(a.drag.x-e)/(t-e);if(r<1){s=!1,a.emit(n.event.ON_PLAY,{time:r});for(var i=0;i<l.length;i++)a.drag.lastPos.x<=l[i].x&&a.drag.x>l[i].x&&a.emit(n.event.REACHED_NODE,{index:i})}else s||(s=!0,a.emit(n.event.ON_COMPLETE,{time:r}));(a.drag.line0&&(a.drag.line0.rotation=1800*r*Math.PI/180,a.drag.line1.rotation=360*r*Math.PI/180),a.bgMask)&&(a.bgMask.getChildAt(0).scale.x=r);a.drag.lastPos={x:a.drag.x,y:a.drag.y}};this.getNodeCount=function(){return o},this.setNodePos=function(e){var t=this["a"+e];"vertical"===i?a.drag.y=t.y:a.drag.x=t.x},nb.MovieClip.ticker.add(function(){a._auto_&&!a.drag.isDragging&&("vertical"===i?a.drag.y+=a._speed_:a.drag.x+=a._speed_,p())}),this.setAutoPlay=function(e,t){this._auto_=e,this._speed_=t||.1},this.setAutoAlign=function(e){this._align_=e},this.setMomentsPause=function(e,t,n){clearTimeout(c),e&&!a.NOTafterStopPlay?(a.setAutoPlay(!1),clearTimeout(c),a.setAutoPlay(!1),c=setTimeout(function(){a.setAutoPlay(!0,n)},t)):a.setAutoPlay(!1)},this.resetTimeline=function(){(this.drag.x=this.bgMask.x,a.bgMask)&&(a.bgMask.getChildAt(0).scale.x=0)}}};t.default=n},522:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e||this,n=a.parent,r=a.record,i=Object.assign({offsetX:-(a.width+10),offsetY:100,limitRect:!0},t),o=instance.stage.NBONOFF||instance.viewStack.NBONOFF,l=Sine.easeInOut;n.bgMask&&(a.mask=n.bgMask.children[0]);a.x=1280-a.record.width-2,a.y=60+o.height*o.scale.y+5;var h=a.x,d=a.y,s=a.x+i.offsetX,c=a.y+i.offsetY;r.addEventListener(TouchEvent.TAP,f);var p=r.x-a.dragForm.x,g=r.y-a.dragForm.y;function f(e){instance.NBDownTip.hideTip(),instance.NBDownTipsError.hideTip(),n.setChildIndex(a,n.children.length-1),a.x==h?(a.emit("showData",{goBack:!1}),TweenMax.to(a,.4,{y:c,onComplete:function(){TweenMax.to(a,.4,{x:s,onComplete:function(){var e=void 0;i.limitRect&&(e={x:0,y:0,width:1280-a.width/3,height:720-a.height}),NBDrag.addDrag(a,e),a.addEventListener(NBDrag.event.DRAG_MOVE,u),a.addEventListener(NBDrag.event.STOP_DRAG,x),r.icon&&TweenMax.to(r.icon,.2,{rotation:Math.PI,ease:l})}})}}),i.showModelMask&&(TweenMax.killTweensOf(n.recordGra),TweenMax.to(n.recordGra,.5,{alpha:1,onComplete:function(){n.setChildIndex(a,n.children.length-1),n.setChildIndex(n.recordGra,n.children.length-2)}}))):(a.emit("showData",{goBack:!0}),e&&m())}function x(){instance.NBDownTip.hideTip(),instance.NBDownTipsError.hideTip(),a.x>h-a.width/3&&m()}function m(){TweenMax.to(a,.5,{x:h,onComplete:function(){TweenMax.to(a,.4,{y:d,onComplete:function(){NBDrag.removeDrag(a),a.removeEventListener(NBDrag.event.DRAG_MOVE,u),a.removeEventListener(NBDrag.event.STOP_DRAG,x),r.icon&&TweenMax.to(r.icon,.2,{rotation:0,ease:l})}})}}),i.showModelMask&&(TweenMax.killTweensOf(n.recordGra),TweenMax.to(n.recordGra,.5,{alpha:0,onComplete:function(){n.setChildIndex(n.recordGra,0)}}))}function u(){a.record.x=p+a.dragForm.x,a.record.y=g+a.dragForm.y}a.showRecord=f,a.recordBack=m,function(){if(i.showModelMask){var e=new PIXI.Graphics;e.beginFill(0,.6),e.drawRect(0,0,1280,720),e.endFill(),n.addChild(e),n.recordGra=e,n.setChildIndex(n.recordGra,0),n.setChildIndex(a,n.children.length-1),n.recordGra.alpha=0,e.addEventListener(TouchEvent.TAP,function(){})}}()}}});